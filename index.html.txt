<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SURAJ PREDICTION 6D DRAGON LOTTO</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 20px;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header h1 {
      margin: 0;
      font-size: 1.8em;
      color: #007acc;
    }
    h2 {
      text-align: center;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
      background-color: #007acc;
      border: none;
      border-radius: 4px;
      color: #fff;
      margin-bottom: 20px;
    }
    .result, .history {
      margin-top: 20px;
    }
    .pattern {
      background: #e8f0fe;
      padding: 8px;
      border-radius: 4px;
      margin-bottom: 10px;
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>SURAJ PREDICTION 6D DRAGON LOTTO</h1>
    </header>
    <p>कृपया 6-अंकीय नम्बर इनपुट गर्नुहोस्। (हरेक digit मा +1 लागू हुन्छ; 0 भए 1 हुन्छ)</p>
    <input type="text" id="numberInput" maxlength="6" placeholder="उदाहरण: 123456">
    <button id="submitBtn">Submit</button>
    <div class="result" id="result"></div>
    <div class="history" id="history"></div>
  </div>

  <script>
    // प्रत्येक digit मा +1 लागू गर्ने, 0 भए 1 बनाउने function
    function transformNumber(numStr) {
      let transformed = "";
      for (let ch of numStr) {
        let digit = parseInt(ch, 10);
        if (isNaN(digit)) return null;
        transformed += (digit === 0 ? "1" : (digit + 1).toString());
      }
      return transformed;
    }
    
    // दुई transformed नम्बर digit-by-digit compare गर्ने र मिल्ने digit लाई circle (⭕) मा wrap गर्ने function
    function highlightMatches(prev, curr) {
      let result = "";
      for (let i = 0; i < curr.length; i++) {
        if (prev[i] === curr[i]) {
          result += "⭕" + curr[i] + "⭕";
        } else {
          result += curr[i];
        }
      }
      return result;
    }
    
    // इतिहास load र save गर्ने functions (localStorage प्रयोग गरेर)
    function loadHistory() {
      let history = localStorage.getItem("patternHistory");
      return history ? JSON.parse(history) : [];
    }
    
    function saveHistory(history) {
      localStorage.setItem("patternHistory", JSON.stringify(history));
    }
    
    // इतिहास देखाउने function
    function displayHistory() {
      let historyDiv = document.getElementById("history");
      let history = loadHistory();
      if (history.length === 0) {
        historyDiv.innerHTML = "<h2>इतिहास</h2><p>कुनै pattern छैन।</p>";
        return;
      }
      let html = "<h2>इतिहास</h2>";
      history.forEach(entry => {
        html += `<div class="pattern">Day ${entry.day}: Original: ${entry.original}, Transformed: ${entry.transformed}</div>`;
      });
      historyDiv.innerHTML = html;
    }
    
    // Event listener for Submit button
    document.getElementById("submitBtn").addEventListener("click", function(){
      let input = document.getElementById("numberInput").value.trim();
      let resultDiv = document.getElementById("result");
      
      if (input.length !== 6 || isNaN(input)) {
        resultDiv.innerHTML = "<p style='color:red;'>कृपया मान्य 6-अंकीय नम्बर दिनुहोस्।</p>";
        return;
      }
      
      let transformed = transformNumber(input);
      let history = loadHistory();
      let day = history.length + 1;
      let message = `<p>Transformed Number: <strong>${transformed}</strong></p>`;
      
      // यदि अघिल्लो दिनको डेटा छ भने compare गर्नुहोस्
      if (history.length > 0) {
        let prevEntry = history[history.length - 1];
        let highlighted = highlightMatches(prevEntry.transformed, transformed);
        message += `<p>अघिल्लो दिनको Transformed Number: ${prevEntry.transformed}</p>`;
        message += `<p>Matched Pattern: ${highlighted}</p>`;
      } else {
        message += "<p>पहिलो इनपुट, तुलना गर्ने डेटा छैन।</p>";
      }
      
      // नयाँ entry इतिहासमा save गर्नुहोस्
      history.push({
        day: day,
        original: input,
        transformed: transformed
      });
      saveHistory(history);
      
      resultDiv.innerHTML = message;
      displayHistory();
    });
    
    // पेज लोड हुँदा इतिहास देखाउनुहोस्
    displayHistory();
  </script>
</body>
</html>